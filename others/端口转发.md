# 端口转发

## [使用 SSH 进行端口转发](https://wangdoc.com/ssh/port-forwarding)

> 使用 ssh 端口转发，需要一个 ssh 服务器作跳板机，不能在接收端口服务器本身作跳板机（反正就是实验失败了不可以）

```bash
ssh -NL [local_host:]local_post:target_host:target_port tunnel_user@tunnel_host
```

* `-L` 指本地转发，`-N` 指不进入 tunnel_host（跳板机）主机会话。
* `local_host`：本地主机，在此主机转发，local_host 可以不设置，默认是 `127.0.0.1`，如果想要外部可以访问，需要改成 `0.0.0.0`，这个需要在 `sshd_config` 中将 `GatewayPorts` 改为 `yes`，不过设置 local_host 为 0.0.0.0 就可以了。同理，local_port 就是接收转发的端口。
* `target_host`：需要转发的主机地址。同理，`target_port` 是需要转发主机的端口。
* `tunnel_host`：就是跳板机，跳板机需要 OpenSSH 服务器。

```bash
# 使用 192.168.50.16 作跳板机，将 192.168.50.175 远程桌面端口转发到本机 3389 端口
# 使用 0.0.0.0 保证外部网络也可以访问
ssh -NL 0.0.0.0:3389:192.168.50.175:3389 root@192.168.50.16
```
